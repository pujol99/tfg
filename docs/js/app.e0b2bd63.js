(function(e){function t(t){for(var a,c,s=t[0],r=t[1],u=t[2],l=0,b=[];l<s.length;l++)c=s[l],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&b.push(i[c][0]),i[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var r=n[s];0!==i[r]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=r;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function i(e,t,n,i,o,c){var s=Object(a["r"])("Welcome"),r=Object(a["r"])("About"),u=Object(a["r"])("Scenes"),d=Object(a["r"])("Survey"),l=Object(a["r"])("Final");return Object(a["m"])(),Object(a["e"])(a["a"],null,[Object(a["g"])(s),Object(a["g"])(r),Object(a["g"])(u),Object(a["g"])(d),Object(a["g"])(l)],64)}var o={key:0},c={class:"card-container"},s={class:"card-title"},r={class:"card-body"},u={class:"card-action"},d={id:"flag-space"};function l(e,t,n,i,l,b){var g=Object(a["r"])("Continue"),f=Object(a["r"])("SelectFlag");return e.currentScene("Welcome")?(Object(a["m"])(),Object(a["e"])("div",o,[Object(a["f"])("div",c,[Object(a["f"])("div",s,[Object(a["f"])("h1",null,Object(a["s"])(e.getLabel("welcome_title")),1)]),Object(a["f"])("div",r,[Object(a["f"])("p",null,Object(a["s"])(e.getLabel("welcome_body")),1)]),Object(a["f"])("div",u,[Object(a["g"])(g)]),Object(a["f"])("div",d,[Object(a["g"])(f)])])])):Object(a["d"])("",!0)}var b=n("5530"),g=n("5502"),f={computed:Object(b["a"])({},Object(g["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))},m=n("d959"),p=n.n(m);const v=p()(f,[["render",l]]);var h=v,O={key:0};function j(e,t,n,i,o,c){var s=Object(a["r"])("Form");return e.currentScene("About")?(Object(a["m"])(),Object(a["e"])("div",O,[Object(a["g"])(s,{propQuestions:c.aboutQuestions,title:e.getLabel("about_title"),saveFunction:"saveAboutDecisions"},null,8,["propQuestions","title"])])):Object(a["d"])("",!0)}var y={computed:Object(b["a"])({aboutQuestions:function(){return{age:{title:this.getLabel("about_age"),options:["10-","11-15","15-19","20+"]},gender:{title:this.getLabel("about_gender"),options:this.getLabel("about_gender_options")}}}},Object(g["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const S=p()(y,[["render",j]]);var x=S;function L(e,t,n,i,o,c){var s=Object(a["r"])("Scene1"),r=Object(a["r"])("Scene");return Object(a["m"])(),Object(a["c"])(r,{sceneName:"Scene1"},{default:Object(a["v"])((function(){return[Object(a["g"])(s)]})),_:1})}function P(e,t,n,i,o,c){var s=Object(a["r"])("PerspectiveCamera"),r=Object(a["r"])("AmbientLight"),u=Object(a["r"])("PointLight"),d=Object(a["r"])("Loader"),l=Object(a["r"])("Scene"),b=Object(a["r"])("Renderer");return Object(a["m"])(),Object(a["c"])(b,{ref:"renderer",resize:"window"},{default:Object(a["v"])((function(){return[Object(a["g"])(s,{ref:"camera",position:o.cameraPosition,lookAt:o.cameraLookAt},null,8,["position","lookAt"]),Object(a["g"])(l,{ref:"scene",background:"#000000"},{default:Object(a["v"])((function(){return[Object(a["g"])(r,{intensity:.2},null,8,["intensity"]),Object(a["g"])(u,{intensity:.5,position:{x:0,y:3,z:0}},null,8,["intensity"]),Object(a["g"])(d,{ref:"loader",payload:{blenderSceneName:"scene1",fbx:[{path:"Standing Arguing",position:{x:1,y:0,z:1},rotation:{y:.5*-Math.PI}},{path:"Standing Arguing",position:{x:-1,y:0,z:1},rotation:{y:.5*Math.PI}}]}},null,8,["payload"])]})),_:1},512)]})),_:1},512)}var C=n("cffa"),_={data:function(){var e=[{x:1,y:3,z:1},{x:1,y:1.5,z:1},{x:0,y:2,z:1}],t=[{x:5,y:5,z:-2},{x:-5,y:5,z:-2},{x:3,y:3,z:1}];return{cameras:t.length,cameraPositions:t,cameraPosition:Object.assign({},t[0]),cameraLookAts:e,cameraLookAt:Object.assign({},e[0]),ANIM_TIME:1}},mounted:function(){var e=this;this.scene=this.$refs.scene,this.renderer=this.$refs.renderer,this.$store.commit("stages/setScene",this.scene),this.renderer.onBeforeRender((function(){e.$refs.loader.update()}))},watch:{camera:function(e,t){e%=this.cameras,this.swap(this.cameraPosition,this.cameraPositions[e]),this.swap(this.cameraLookAt,this.cameraLookAts[e])}},computed:Object(b["a"])({},Object(g["c"])({camera:"stages/getSceneCamera"})),methods:{swap:function(e,t){C["a"].to(e,{duration:this.ANIM_TIME,x:t.x,y:t.y,z:t.z})}}};const A=p()(_,[["render",P]]);var w=A,k={key:0};function T(e,t,n,i,o,c){var s=Object(a["r"])("Options"),r=Object(a["r"])("Report");return e.currentStage(n.sceneName)?(Object(a["m"])(),Object(a["e"])("div",k,[Object(a["q"])(e.$slots,"default"),Object(a["g"])(s,{information:c.options},null,8,["information"]),Object(a["g"])(r,{sceneName:n.sceneName},null,8,["sceneName"])])):Object(a["d"])("",!0)}var M={props:["sceneName"],mounted:function(){this.scene=this.$refs.scene},computed:Object(b["a"])(Object(b["a"])({},Object(g["c"])({currentStage:"stages/isCurrentStage",getLabel:"data/getLabel"})),{},{options:function(){return{description:this.getLabel("".concat(this.sceneName,"_desc")),title:this.getLabel("".concat(this.sceneName,"_title")),options:this.getLabel("".concat(this.sceneName,"_options"))}}})};const D=p()(M,[["render",T]]);var z=D,E={name:"Scenes",components:{Scene:z,Scene1:w}};const F=p()(E,[["render",L]]);var I=F,N={key:0};function R(e,t,n,i,o,c){var s=Object(a["r"])("Form");return e.currentScene("Survey")?(Object(a["m"])(),Object(a["e"])("div",N,[Object(a["g"])(s,{title:e.getLabel("survey_title"),propQuestions:c.surveyQuestions,saveFunction:"saveSurveyDecisions"},null,8,["title","propQuestions"])])):Object(a["d"])("",!0)}var G={computed:Object(b["a"])({surveyQuestions:function(){var e=this.getLabel("survey_options");return{s1:{title:this.getLabel("s1_title"),options:e},s2:{title:this.getLabel("s2_title"),options:e},s3:{title:this.getLabel("s2_title"),options:e}}}},Object(g["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const $=p()(G,[["render",R]]);var B=$,Q={key:0},q={class:"card-container"},H={class:"card-title"},U={class:"card-body"},W={class:"card-action"};function X(e,t,n,i,o,c){return e.currentScene("Final")?(Object(a["m"])(),Object(a["e"])("div",Q,[Object(a["f"])("div",q,[Object(a["f"])("div",H,[Object(a["f"])("h1",null,Object(a["s"])(e.getLabel("final_title")),1)]),Object(a["f"])("div",U,[Object(a["f"])("p",null,Object(a["s"])(e.getLabel("final_body")),1)]),Object(a["f"])("div",W,[Object(a["f"])("button",{onClick:t[0]||(t[0]=function(e){return c.reloadPage()})},Object(a["s"])(e.getLabel("final_restart")),1)])])])):Object(a["d"])("",!0)}var J={computed:Object(b["a"])({},Object(g["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"})),methods:{reloadPage:function(){window.location.reload()}}};const K=p()(J,[["render",X]]);var Y=K,V={name:"App",components:{Welcome:h,About:x,Scenes:I,Survey:B,Final:Y},mounted:function(){this.$store.dispatch("stages/onAppLoad")}};const Z=p()(V,[["render",i]]);var ee=Z;function te(e,t,n,i,o,c){return Object(a["m"])(),Object(a["e"])("button",{onClick:t[0]||(t[0]=function(t){return e.nextStage()})},Object(a["s"])(e.getLabel("continue")),1)}var ne={computed:Object(b["a"])({},Object(g["c"])({getLabel:"data/getLabel"})),methods:Object(b["a"])({},Object(g["b"])({nextStage:"stages/nextStage"}))};const ae=p()(ne,[["render",te]]);var ie=ae,oe=(n("b64b"),{class:"card-container"}),ce={class:"card-title"},se={class:"card-body"},re={class:"form-element-title"},ue={class:"form-element-options"},de=["onClick"],le={class:"card-action"};function be(e,t,n,i,o,c){var s=Object(a["r"])("Popup");return Object(a["m"])(),Object(a["e"])(a["a"],null,[Object(a["g"])(s,{ref:"popup",message:e.getLabel("popup")},null,8,["message"]),Object(a["f"])("div",oe,[Object(a["f"])("div",ce,[Object(a["f"])("h2",null,Object(a["s"])(n.title),1)]),Object(a["f"])("div",se,[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(Object.keys(c.currentPage),(function(e){return Object(a["m"])(),Object(a["e"])("div",{class:"form-element",key:e},[Object(a["f"])("div",re,Object(a["s"])(c.currentPage[e].title),1),Object(a["f"])("div",ue,[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(c.currentPage[e].options,(function(t,n){return Object(a["m"])(),Object(a["e"])("div",{class:Object(a["k"])(["form-element-option",{selected:t===c.currentPage[e].optionSelected}]),key:t,onClick:function(a){return c.onDecisionClick(c.currentPage[e],t,n)}},Object(a["s"])(t),11,de)})),128))])])})),128))]),Object(a["f"])("div",le,[Object(a["f"])("button",{onClick:t[0]||(t[0]=function(){return c.onContinue&&c.onContinue.apply(c,arguments)})},Object(a["s"])(e.getLabel("continue")),1)])])],64)}var ge=n("3835"),fe=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("4fad"),{props:{propQuestions:Object,title:String,saveFunction:String},data:function(){return{questions:this.propQuestions,pageIndex:0,pageSize:2}},computed:Object(b["a"])(Object(b["a"])({},Object(g["c"])({getLabel:"data/getLabel"})),{},{dataValidated:function(){var e=this;return 0==Object.keys(this.currentPage).filter((function(t){return!e.currentPage[t].options.includes(e.currentPage[t].optionSelected)})).length},currentPage:function(){return this.paginateQuestions(this.questions,this.pageSize)[this.pageIndex]}}),methods:Object(b["a"])(Object(b["a"])({},Object(g["b"])({nextStage:"stages/nextStage"})),{},{onContinue:function(){this.dataValidated?(this.saveData(),this.pageIndex===this.pagesLength-1?this.nextStage():this.pageIndex++):this.$refs.popup.activate()},saveData:function(){this.formatDataForSave(),this.$store.commit("data/".concat(this.saveFunction),this.currentPage)},onDecisionClick:function(e,t,n){e.optionSelected=t,e.optionSelectedIndex=n},formatDataForSave:function(){for(var e=0,t=Object.keys(this.currentPage);e<t.length;e++){var n=t[e];this.currentPage[n]=this.currentPage[n].optionSelectedIndex}},paginateQuestions:function(e,t){for(var n=[],a={},i=0,o=0,c=Object.entries(e);o<c.length;o++){var s=Object(ge["a"])(c[o],2),r=s[0],u=s[1];0!==i&&i%t===0&&(n.push(a),a={}),a[r]=u,i++}return 0!==Object.keys(a).length&&n.push(a),this.pagesLength=n.length,n}})});const me=p()(fe,[["render",be]]);var pe=me;function ve(e,t,n,i,o,c){var s=Object(a["r"])("ShaderMaterial"),r=Object(a["r"])("Plane");return Object(a["m"])(),Object(a["c"])(r,{ref:"loadingScreen",width:2,height:2,position:{y:-2,z:0}},{default:Object(a["v"])((function(){return[Object(a["g"])(s,{props:{vertexShader:o.vs,fragmentShader:o.fs,uniforms:o.us}},null,8,["props"])]})),_:1},512)}n("b0c0");var he=n("5a89"),Oe="\nvarying vec2 vUv;\nuniform float uTime;\nvarying float vTime;\nvoid main()\n{\n    gl_Position = vec4(position, 1.0);\n    vUv = uv;\n    vTime = uTime;\n}\n",je="\nuniform float uAlpha;\nvarying vec2 vUv;\nvarying float vTime;\n\nvec4 permute(vec4 x)\n{\n    return mod(((x*34.0)+1.0)*x, 289.0);\n}\n\nvec2 fade(vec2 t)\n{\n    return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\nfloat cnoise(vec2 P)\n{\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n    vec4 i = permute(permute(ix) + iy);\n    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n    vec4 gy = abs(gx) - 0.5;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n    vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n}\n\nvoid main()\n{\n    float strength = 1.0 - step(sin(vTime*0.6), sin(cnoise(vUv * 10.0) * 20.0));\n    gl_FragColor = vec4(vec3(strength), uAlpha);\n}\n",ye={data:function(){return{FADETIME:1,us:{uAlpha:{value:1},uTime:{value:0}},vs:Oe,fs:je}},mounted:function(){this.loadingScreen=this.$refs.loadingScreen,this.loadingScreen.mesh.name="loadingPlane",this.loadingScreenMaterial=this.loadingScreen.material,this.loadingScreenMaterial.transparent=!0,this.clock=new he["p"]},methods:Object(b["a"])(Object(b["a"])({},Object(g["b"])({loadingFinish:"stages/loadingFinish"})),{},{finish:function(){var e=this;C["a"].to(this.loadingScreenMaterial.uniforms.uAlpha,{duration:this.FADETIME,value:0,onComplete:function(){e.loadingFinish()}})},update:function(){var e=this.clock.getElapsedTime();this.us.uTime.value=e}})};const Se=p()(ye,[["render",ve]]);var xe=Se;function Le(e,t,n,i,o,c){return n.message?(Object(a["m"])(),Object(a["e"])("button",{key:0,class:Object(a["k"])(["option hided",{active:!e.sceneLoading,disabled:n.disabled}]),onClick:t[0]||(t[0]=function(){return c.onClick&&c.onClick.apply(c,arguments)})},Object(a["s"])(n.message),3)):Object(a["d"])("",!0)}n("a9e3");var Pe={props:{index:Number,message:String,disabled:{type:Boolean,default:!1}},computed:Object(b["a"])({},Object(g["c"])({sceneLoading:"stages/isSceneLoading"})),methods:{onClick:function(){this.disabled||this.$store.commit("data/saveSceneDecision",this.index)}}};const Ce=p()(Pe,[["render",Le]]);var _e=Ce,Ae=(n("a4d3"),n("e01a"),{key:0,class:"description"}),we={class:"title"},ke={class:"options",id:"options"},Te={class:"icons"};function Me(e,t,n,i,o,c){var s=this,r=Object(a["r"])("Option");return Object(a["m"])(),Object(a["e"])("div",null,[e.sceneLoading?(Object(a["m"])(),Object(a["e"])("div",Ae,[Object(a["f"])("h1",null,Object(a["s"])(n.information.description),1)])):Object(a["d"])("",!0),Object(a["f"])("div",we,[Object(a["g"])(r,{message:n.information.title,disabled:""},null,8,["message"])]),Object(a["f"])("div",ke,[Object(a["f"])("div",Te,[Object(a["f"])("div",null,[Object(a["f"])("span",{class:Object(a["k"])(["info hided",{active:!e.sceneLoading}])},Object(a["s"])(c.moodFormatted),3)]),Object(a["f"])("div",null,[Object(a["f"])("i",{onClick:t[0]||(t[0]=function(e){return o.isExpanded=!o.isExpanded}),class:Object(a["k"])(["material-icons icon hided",{active:!e.sceneLoading}])},Object(a["s"])(c.icon),3)]),Object(a["f"])("div",null,[Object(a["f"])("i",{class:Object(a["k"])(["material-icons icon hided",{active:!e.sceneLoading}]),onClick:t[1]||(t[1]=function(e){return s.$store.commit("stages/nextCamera")})}," 360 ",2)])]),Object(a["f"])("div",{class:Object(a["k"])(["options_content",{expanded:o.isExpanded}])},[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(n.information.options,(function(e,t){return Object(a["m"])(),Object(a["c"])(r,{key:e,message:e,index:t},null,8,["message","index"])})),128))],2)])])}n("99af");var De={props:["information"],data:function(){return{isExpanded:!0}},watch:{sceneReporting:function(e,t){!0===e&&document.getElementById("options").remove()}},computed:Object(b["a"])(Object(b["a"])({},Object(g["c"])({sceneLoading:"stages/isSceneLoading",sceneReporting:"stages/isSceneReporting",currentCamera:"stages/getSceneCamera",mood:"data/getMood",getLabel:"data/getLabel"})),{},{moodFormatted:function(){return"".concat(this.getLabel("mood"),": ").concat(100*this.mood,"%")},icon:function(){return this.isExpanded?"expand_more":"expand_less"}})};const ze=p()(De,[["render",Me]]);var Ee=ze;function Fe(e,t,n,i,o,c){return Object(a["m"])(),Object(a["e"])("div",{class:Object(a["k"])(["popup warning",{popupActive:o.activated,popupInactive:o.deactivated}])},[Object(a["f"])("h5",null,Object(a["s"])(n.message),1)],2)}var Ie={data:function(){return{POPUP_TIME:2,activated:!1,deactivated:!1}},props:["message"],methods:{activate:function(){if(!this.activated){this.activated=!0,this.deactivated=!1;var e=this;setTimeout((function(){e.deactivate()}),1e3*this.POPUP_TIME)}},deactivate:function(){this.activated=!1,this.deactivated=!0}}};const Ne=p()(Ie,[["render",Fe]]);var Re=Ne;function Ge(e,t,n,i,o,c){var s=Object(a["r"])("Camera"),r=Object(a["r"])("NoisyImage"),u=Object(a["r"])("Scene"),d=Object(a["r"])("Renderer");return Object(a["m"])(),Object(a["c"])(d,{ref:"renderer"},{default:Object(a["v"])((function(){return[Object(a["g"])(s,{position:{x:0,y:0,z:100}}),Object(a["g"])(u,{ref:"scene"},{default:Object(a["v"])((function(){return[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(o.langs,(function(e){return Object(a["m"])(),Object(a["c"])(r,{key:e,src:"./assets/images/".concat(e.type,".png"),width:120,dispCoef:0,"z-coef":o.selected===e.type?5:0,position:{x:e.pos,y:0,z:0},onClick:function(t){return c.onClick(e.type)},onPointerOver:c.onMouseOver},null,8,["src","z-coef","position","onClick","onPointerOver"])})),128))]})),_:1},512)]})),_:1},512)}var $e=n("00ac"),Be={components:{NoisyImage:$e["a"]},data:function(){return{langs:[{type:"CAT",pos:45},{type:"ENG",pos:-45}],selected:""}},mounted:function(){this.selected=this.getLanguage},computed:Object(b["a"])({},Object(g["c"])({getLanguage:"data/getLanguage"})),methods:Object(b["a"])(Object(b["a"])({},Object(g["b"])({setLanguage:"data/setLanguage"})),{},{onMouseOver:function(e){var t=e.over;e.component;document.getElementById("flag-space").style.cursor=t?"pointer":"default"},onClick:function(e){this.setLanguage(e),this.selected=e}})};const Qe=p()(Be,[["render",Ge]]);var qe=Qe,He={key:0},Ue={class:"card-container"},We={class:"card-body"},Xe={class:"card-action"};function Je(e,t,n,i,o,c){var s=Object(a["r"])("Continue");return e.sceneReporting?(Object(a["m"])(),Object(a["e"])("div",He,[Object(a["f"])("div",Ue,[Object(a["f"])("div",We,[Object(a["f"])("p",null,Object(a["s"])(e.getLabel("".concat(n.sceneName,"_report"))[e.decisionTaken]),1)]),Object(a["f"])("div",Xe,[Object(a["g"])(s)])])])):Object(a["d"])("",!0)}var Ke={props:["sceneName"],computed:Object(b["a"])({},Object(g["c"])({sceneReporting:"stages/isSceneReporting",getLabel:"data/getLabel",decisionTaken:"data/getDecisionTaken"}))};const Ye=p()(Ke,[["render",Je]]);var Ve=Ye;function Ze(e,t,n,i,o,c){var s=Object(a["r"])("LoadingScreen"),r=Object(a["r"])("LoadBlender"),u=Object(a["r"])("LoadFBX");return Object(a["m"])(),Object(a["e"])(a["a"],null,[Object(a["g"])(s,{ref:"loadingScreen"},null,512),Object(a["g"])(r,{ref:"blender",sceneName:n.payload.blenderSceneName},null,8,["sceneName"]),Object(a["g"])(u,{ref:"fbx",models:n.payload.fbx},null,8,["models"])],64)}var et={props:{payload:Object},computed:Object(b["a"])({},Object(g["c"])({isSceneLoading:"stages/isSceneLoading"})),mounted:function(){this.loadingScreen=this.$refs.loadingScreen,this.blender=this.$refs.blender,this.fbx=this.$refs.fbx},methods:{update:function(){this.fbx.update(),this.isSceneLoading&&this.loadingScreen.update(),this.isSceneLoading&&this.isLoaded()&&this.loadingScreen.finish()},isLoaded:function(){return this.blender.isLoaded&&this.fbx.isLoaded}}};const tt=p()(et,[["render",Ze]]);var nt=tt;function at(e,t,n,i,o,c){return Object(a["m"])(),Object(a["e"])("div")}n("159b");var it=n("34ad"),ot=n("0ca5"),ct={props:["sceneName"],mounted:function(){var e=this;if(this.isLoaded=!1,this.sceneName){var t=new he["nc"],n=new ot["a"],a=new it["a"];n.setDecoderPath("./assets/draco/"),a.setDRACOLoader(n);var i=t.load("./assets/scenes/".concat(this.sceneName,"/baked.jpg"));i.flipY=!1;var o=new he["ob"]({map:i}),c=new he["ob"]({color:16777189});a.load("./assets/scenes/".concat(this.sceneName,"/scene.glb"),(function(t){t.scene.traverse((function(e){e.material=o})),t.scene.children.filter((function(e){return e.name.includes("Light")})).forEach((function(e){return e.material=c})),e.$store.commit("stages/addToScene",t.scene),e.isLoaded=!0}))}else this.isLoaded=!0}};const st=p()(ct,[["render",at]]);var rt=st;function ut(e,t,n,i,o,c){var s=Object(a["r"])("Aura"),r=Object(a["r"])("FbxModel");return Object(a["m"])(),Object(a["e"])(a["a"],null,[Object(a["g"])(s,{ref:"aura"},null,512),(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["p"])(n.models,(function(e){return Object(a["m"])(),Object(a["c"])(r,{key:e,src:"./assets/models/".concat(e.path,".fbx"),onLoad:c.onLoad,scale:e.scale||{x:.01,y:.01,z:.01},position:e.position||{x:0,y:0,z:0},rotation:e.rotation||{y:.5*-Math.PI}},null,8,["src","onLoad","scale","position","rotation"])})),128))],64)}function dt(e,t,n,i,o,c){return Object(a["m"])(),Object(a["e"])("div")}n("cfc3"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var lt="\nuniform float uTime;\nuniform float uPixelRatio;\nuniform float uSize;\n\nattribute float aScale;\n\nvoid main()\n{\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n    modelPosition.y += sin(uTime + modelPosition.x * 100.0) * aScale * 0.2;\n\n    vec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n\n    gl_Position = projectionPosition;\n    \n    gl_PointSize = uSize * aScale * uPixelRatio;\n    gl_PointSize *= (1.0 / - viewPosition.z);\n}\n",bt="\nuniform vec3 uColor;\n\nvoid main()\n{\n    float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n    float strength = 0.05 / distanceToCenter - 0.1;\n\n    gl_FragColor = vec4(uColor, strength);\n}\n",gt={data:function(){return{vs:lt,fs:bt,loaded:!1,AURA_HEIGHT:2}},mounted:function(){this.clock=new he["p"],this.firefliesMaterial=null,this.fireflies=null,this.red=new he["q"]("red"),this.green=new he["q"]("green")},methods:{init:function(e){for(var t=this,n=new he["k"],a=60,i=new Float32Array(3*a),o=new Float32Array(a),c=0;c<a;c++)i[3*c+0]=Math.random()+e.x-.4,i[3*c+1]=Math.random()*this.AURA_HEIGHT,i[3*c+2]=Math.random()+e.z-.5,o[c]=Math.random();n.setAttribute("position",new he["j"](i,3)),n.setAttribute("aScale",new he["j"](o,1)),this.firefliesMaterial=new he["ac"]({uniforms:{uTime:{value:0},uPixelRatio:{value:Math.min(window.devicePixelRatio,2)},uSize:{value:342},uColor:{value:this.red.lerp(this.green,this.mood)}},vertexShader:lt,fragmentShader:bt,transparent:!0,blending:he["b"],depthWrite:!1}),this.fireflies=new he["Kb"](n,this.firefliesMaterial),window.addEventListener("resize",(function(){t.firefliesMaterial.uniforms.uPixelRatio.value=Math.min(window.devicePixelRatio,2)})),this.load()},load:function(){this.$store.commit("stages/addToScene",this.fireflies),this.loaded=!0},update:function(){if(this.loaded){var e=this.clock.getElapsedTime();this.firefliesMaterial.uniforms.uTime.value=e}}},computed:Object(b["a"])({},Object(g["c"])({mood:"data/getMood"}))};const ft=p()(gt,[["render",dt]]);var mt=ft,pt={props:{models:Array},components:{Aura:mt},mounted:function(){this.modelsSize=this.models&&this.models.length?this.models.length:0,this.isLoaded=0===this.modelsSize,this.animations=[]},methods:{update:function(){this.animations.forEach((function(e){e.animation.update(e.clock.getDelta())})),this.$refs.aura.update()},onLoad:function(e){var t=new he["e"](e);t.clipAction(e.animations[1]).play();var n=new he["p"];0===this.animations.length&&this.$refs.aura.init(this.models[0].position),this.animations.push({animation:t,clock:n}),this.animations.length===this.modelsSize&&(this.isLoaded=!0)}}};const vt=p()(pt,[["render",ut]]);var ht=vt,Ot=(n("7db0"),n("e9c4"),{continue:["Continue","Avanza","Avança"],popup:["Fill answers please","Rellena las preguntas por favor","Emplena les preguntes siusplau"],welcome_title:["TFG","TFG","TFG"],welcome_body:["Game for raising awarness on social media addiction","Juego para concienciar sobre la adicción a las redes sociales","Joc per conscienciar sobre l'addicció a les xarxes socials"],final_title:["Game end","Fin del juego","Fi del joc"],final_body:["Thanks","Gracias","Gracies"],final_restart:["Restart","Reinicia","Reinicia"],about_title:["About you","Sobre ti","Sobre tu"],about_age:["Select your age","Selecciona tu edad","Selecciona la teva edat"],about_gender:["Select your gender","Selecciona tu genero","Selecciona el teu genere"],about_gender_options:[["Male","Female","Other"],["Hombre","Mujer","Otro"],["Home","Dona","Altre"]],survey_title:["Final survey","Encuesta final","Enquesta final"],s1_title:["ENGAn excessive use of social media platforms can lead to negative effects in physical and mental health","ESPAn excessive use of social media platforms can lead to negative effects in physical and mental health","CATAn excessive use of social media platforms can lead to negative effects in physical and mental health"],s2_title:["ENGAn excessive use of social media platforms can lead to negative effects in physical and mental health","ESPAn excessive use of social media platforms can lead to negative effects in physical and mental health","CATAn excessive use of social media platforms can lead to negative effects in physical and mental health"],survey_options:[["Disagree","Neutral","Agree"],["En desacuerdo","Neutral","De acuerdo"],["En desacord","Neutral","D'acord"]],mood:["Mood","Animos","Anims"],Scene1_desc:["Day 1 Scene 1","Dia 1 Situacion 1","Dia 1 Situacio 1"],Scene1_title:["Your friend is sad because she failed, but you are on the phone","Your friend is sad because she failed, but you are on the phone","CATYour friend is sad because she failed, but you are on the phone"],Scene1_options:[["Ignore and stay on the phone.","Listen while on the phone.","Give her all your attention."],["Ignore and stay on the phone.","Listen while on the phone.","Give her all your attention."],["CATIgnore and stay on the phone.","CATListen while on the phone.","cATGive her all your attention."]],Scene1_report:[["Bad","Mid.","Good"],["Bad","Mid.","Good"],["CATBad","CATMid.CATMid.CATMid.CATMid. CATMid.CATMid. CATMid.","cATGood"]]}),jt=function(){return{languages:{ENG:0,ESP:1,CAT:2},language:2,userData:{sceneDecisions:[],aboutDecisions:{},surveyDecisions:{}},mood:.5,decisionsMood:[[-.5,-.1,.5]],decisionTaken:null,scenesCollection:"61b4956f0ddbee6f8b1b8c7e",usersCollection:"61b49c4262ed886f915e5a13",masterKey:"$2b$10$yGbK6Zw/E5lzTl.TmQivFuhYR87PWV2Cy2TG.gIi8Lp2BLduGVNyq"}},yt={getLabel:function(e){return function(t){return Ot[t]?Ot[t][e.language]:"No label"}},getLanguage:function(e){return Object.keys(e.languages).find((function(t){return e.languages[t]===e.language}))},getMood:function(e){return e.mood},getDecisionTaken:function(e){return e.decisionTaken},getUserData:function(e){return e.userData}},St={setLanguage:function(e,t){var n=e.commit;n("setLanguage",t)},saveData:function(e){e.commit;var t=e.getters;console.log(t.getUserData)}},xt={setLanguage:function(e,t){e.language=e.languages[t]},saveData:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&console.log(t.responseText)},t.open("POST","https://api.jsonbin.io/v3/b",!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Master-Key",e.masterKey),t.setRequestHeader("X-Collection-Id",e.usersCollection),t.send(JSON.stringify(e.userData))},saveAboutDecisions:function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var i=Object(ge["a"])(a[n],2),o=i[0],c=i[1];e.userData.aboutDecisions[o]=c}},saveSurveyDecisions:function(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var i=Object(ge["a"])(a[n],2),o=i[0],c=i[1];e.userData.surveyDecisions[o]=c}},saveSceneDecision:function(e,t){var n=e.userData.sceneDecisions.length;e.userData.sceneDecisions.push(t),e.mood+=e.decisionsMood[n][t],e.mood>1&&(e.mood=1),e.mood<0&&(e.mood=0),e.decisionTaken=t,this.commit("stages/reportStart",{root:!0})}},Lt={namespaced:!0,state:jt,getters:yt,actions:St,mutations:xt},Pt=function(){return{stages:["Welcome","About","Scene1","Survey","Final"],currentStageIndex:0,sceneLoading:!1,sceneReporting:!1,scene:null,sceneCamera:0}},Ct={isCurrentStage:function(e){return function(t){return e.stages[e.currentStageIndex]==t}},currentStageIsScene:function(e){return e.stages[e.currentStageIndex].includes("Scene")},isSceneLoading:function(e){return e.sceneLoading},isSceneReporting:function(e){return e.sceneReporting},getSceneCamera:function(e){return e.sceneCamera},isLastStage:function(e){return e.currentStageIndex==e.stages.length-1}},_t={onAppLoad:function(e){var t=e.commit,n=e.getters;n.currentStageIsScene&&t("loadingStart")},nextStage:function(e){var t=e.commit,n=e.getters;n.isLastStage||t("nextStage"),n.currentStageIsScene&&t("loadingStart"),n.isLastStage&&t("saveData")},loadingFinish:function(e){var t=e.commit;t("removeLoading"),t("loadingEnd")}},At={nextStage:function(e){e.currentStageIndex++},setScene:function(e,t){e.scene=t},removeLoading:function(e){e.scene.remove(e.scene.scene.getObjectByName("loadingPlane"))},addToScene:function(e,t){e.scene.add(t)},loadingStart:function(e){e.sceneLoading=!0},loadingEnd:function(e){e.sceneLoading=!1},reportStart:function(e){e.sceneReporting=!0},reportEnd:function(e){e.sceneReporting=!1},saveData:function(){this.dispatch("data/saveData",{root:!0})},nextCamera:function(e){e.sceneCamera++}},wt={namespaced:!0,state:Pt,getters:Ct,actions:_t,mutations:At},kt=Object(g["a"])({modules:{data:Lt,stages:wt}}),Tt=n("af1e");Object(a["b"])(ee).use(kt).use(Tt["b"]).component("Continue",ie).component("Form",pe).component("LoadingScreen",xe).component("Report",Ve).component("Option",_e).component("Options",Ee).component("Popup",Re).component("SelectFlag",qe).component("Loader",nt).component("LoadBlender",rt).component("LoadFBX",ht).mount("#app")}});
//# sourceMappingURL=app.e0b2bd63.js.map