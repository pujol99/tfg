(function(e){function t(t){for(var o,c,r=t[0],s=t[1],l=t[2],u=0,g=[];u<r.length;u++)c=r[u],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&g.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(g.length)g.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function a(e,t,n,a,i,c){var r=Object(o["q"])("Welcome"),s=Object(o["q"])("About"),l=Object(o["q"])("Scenes"),d=Object(o["q"])("Survey"),u=Object(o["q"])("Final");return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["g"])(r),Object(o["g"])(s),Object(o["g"])(l),Object(o["g"])(d),Object(o["g"])(u)],64)}var i={key:0},c={class:"card-container"},r={class:"card-title"},s={class:"card-body"},l={class:"card-action"},d=Object(o["f"])("hr",null,null,-1);function u(e,t,n,a,u,g){var b=Object(o["q"])("Disclaimer"),f=Object(o["q"])("Continue"),m=Object(o["q"])("SelectFlag");return e.currentScene("Welcome")?(Object(o["m"])(),Object(o["e"])("div",i,[Object(o["f"])("div",c,[Object(o["f"])("div",r,[Object(o["f"])("h1",null,Object(o["r"])(e.getLabel("welcome_title")),1)]),Object(o["f"])("div",s,[Object(o["f"])("p",null,Object(o["r"])(e.getLabel("welcome_body")),1)]),Object(o["f"])("div",l,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(e.getLabel("welcome_disclaimers"),(function(e){return Object(o["m"])(),Object(o["c"])(b,{key:e,content:e},null,8,["content"])})),128)),Object(o["g"])(f)]),d,Object(o["g"])(m)])])):Object(o["d"])("",!0)}var g=n("5530"),b=n("5502"),f={computed:Object(g["a"])({},Object(b["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))},m=n("d959"),p=n.n(m);const h=p()(f,[["render",u]]);var v=h,j={key:0};function O(e,t,n,a,i,c){var r=Object(o["q"])("Form");return e.currentScene("About")?(Object(o["m"])(),Object(o["e"])("div",j,[Object(o["g"])(r,{propQuestions:c.aboutQuestions,title:e.getLabel("about_title"),saveFunction:"saveAboutDecisions"},null,8,["propQuestions","title"])])):Object(o["d"])("",!0)}var y={computed:Object(g["a"])({aboutQuestions:function(){return{age:{title:this.getLabel("about_age"),options:["10-","11-15","15-19","20+"]},gender:{title:this.getLabel("about_gender"),options:this.getLabel("about_gender_options")}}}},Object(b["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const S=p()(y,[["render",O]]);var x=S;function L(e,t,n,a,i,c){var r=Object(o["q"])("Scene");return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["g"])(r,{sceneName:"Scene1"}),Object(o["g"])(r,{sceneName:"Scene2"}),Object(o["g"])(r,{sceneName:"Scene3"})],64)}var k={key:0};function A(e,t,n,a,i,c){var r=Object(o["q"])("SceneVisuals"),s=Object(o["q"])("SceneUi"),l=Object(o["q"])("Report");return e.currentStage(n.sceneName)?(Object(o["m"])(),Object(o["e"])("div",k,[Object(o["g"])(r,{config:i.config[n.sceneName]},null,8,["config"]),Object(o["g"])(s,{information:c.options},null,8,["information"]),Object(o["g"])(l,{sceneName:n.sceneName},null,8,["sceneName"])])):Object(o["d"])("",!0)}var _={Scene1:{sceneName:"scene1",fbx:[{path:"Texting",position:{x:-.3,y:0,z:-1.3},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*.75}},{path:"Sitting Talking Right",position:{x:-1,y:.15,z:-1},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*.25}},{path:"Sitting Talking Left",position:{x:-1,y:.15,z:-.6},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*.25}}],cameraLookAts:[{x:0,y:.5,z:-1},{x:-.7,y:.4,z:-1},{x:-.7,y:.3,z:-1}],cameraPositions:[{x:-3,y:1,z:-2},{x:-1,y:1,z:-3},{x:-1,y:2,z:-3}],update:function(e){}},Scene2:{sceneName:"scene2",fbx:[{path:"Walking",position:{x:1,y:0,z:0},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*0}}],cameraLookAts:[{x:1,y:.49,z:0},{x:1.01,y:.5,z:.01},{x:1.02,y:.51,z:.02},{x:1.03,y:.52,z:.03}],cameraPositions:[{x:1,y:.5,z:1.5},{x:0,y:.51,z:0},{x:1,y:.52,z:-1.5},{x:2,y:.53,z:0}],update:function(e){e.rotation.y+=.003}},Scene3:{sceneName:"scene3",fbx:[{path:"Texting",position:{x:-.5,y:0,z:-0},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*.75}},{path:"Sitting Talking Right",position:{x:-2.1,y:.45,z:-.4},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*.25}},{path:"Sitting Talking Left",position:{x:-2.1,y:.45,z:-0},scale:{x:.002,y:.002,z:.002},rotation:{y:2*Math.PI*.25}}],cameraLookAts:[{x:-1,y:1,z:0},{x:-2,y:.8,z:0}],cameraPositions:[{x:1.5,y:1,z:.5},{x:1.5,y:1,z:-.5}],update:function(e){}}},P={props:["sceneName"],data:function(){return{config:_}},computed:Object(g["a"])(Object(g["a"])({},Object(b["c"])({currentStage:"stages/isCurrentStage",getLabel:"data/getLabel"})),{},{options:function(){return{description:this.getLabel("".concat(this.sceneName,"_desc")),title:this.getLabel("".concat(this.sceneName,"_title")),options:this.getLabel("".concat(this.sceneName,"_options"))}}})};const w=p()(P,[["render",A]]);var M=w,T={components:{Scene:M}};const C=p()(T,[["render",L]]);var F=C,z={key:0};function I(e,t,n,a,i,c){var r=Object(o["q"])("Form");return e.currentScene("Survey")?(Object(o["m"])(),Object(o["e"])("div",z,[Object(o["g"])(r,{title:e.getLabel("survey_title"),propQuestions:c.surveyQuestions,saveFunction:"saveSurveyDecisions"},null,8,["title","propQuestions"])])):Object(o["d"])("",!0)}var D={computed:Object(g["a"])({surveyQuestions:function(){var e=this.getLabel("survey_options");return{s1:{title:this.getLabel("s1_title"),options:e},s2:{title:this.getLabel("s2_title"),options:e},s3:{title:this.getLabel("s2_title"),options:e}}}},Object(b["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"}))};const E=p()(D,[["render",I]]);var q=E,R={key:0},N={class:"card-container"},G={class:"card-title"},Y={class:"card-body"},B={class:"card-action"};function $(e,t,n,a,i,c){return e.currentScene("Final")?(Object(o["m"])(),Object(o["e"])("div",R,[Object(o["f"])("div",N,[Object(o["f"])("div",G,[Object(o["f"])("h1",null,Object(o["r"])(e.getLabel("final_title")),1)]),Object(o["f"])("div",Y,[Object(o["f"])("p",null,Object(o["r"])(e.getLabel("final_body")),1)]),Object(o["f"])("div",B,[Object(o["f"])("button",{class:"continueButton",onClick:t[0]||(t[0]=function(e){return c.reloadPage()})},Object(o["r"])(e.getLabel("final_restart")),1)])])])):Object(o["d"])("",!0)}var U={computed:Object(g["a"])({},Object(b["c"])({currentScene:"stages/isCurrentStage",getLabel:"data/getLabel"})),methods:{reloadPage:function(){window.location.reload()}}};const H=p()(U,[["render",$]]);var Q=H,Z={name:"App",components:{Welcome:v,About:x,Scenes:F,Survey:q,Final:Q},mounted:function(){this.$store.dispatch("stages/onAppLoad")}};const W=p()(Z,[["render",a]]);var V=W;function X(e,t,n,a,i,c){var r=this;return Object(o["m"])(),Object(o["e"])("button",{class:"continueButton",onClick:t[0]||(t[0]=function(t){return!r.disabled&&e.nextStage()})},Object(o["r"])(e.getLabel("continue")),1)}var K={props:{disabled:{type:Boolean,default:!1}},computed:Object(g["a"])({},Object(b["c"])({getLabel:"data/getLabel"})),methods:Object(g["a"])({},Object(b["b"])({nextStage:"stages/nextStage"}))};const J=p()(K,[["render",X]]);var ee=J,te=(n("b64b"),{class:"card-container"}),ne={class:"card-title"},oe={class:"card-body"},ae={class:"form-element-title"},ie={class:"form-element-options"},ce=["onClick"],re={class:"card-action"};function se(e,t,n,a,i,c){var r=Object(o["q"])("Popup"),s=Object(o["q"])("Continue");return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["g"])(r,{ref:"popup",message:e.getLabel("popup")},null,8,["message"]),Object(o["f"])("div",te,[Object(o["f"])("div",ne,[Object(o["f"])("h2",null,Object(o["r"])(n.title),1)]),Object(o["f"])("div",oe,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(Object.keys(c.currentPage),(function(e){return Object(o["m"])(),Object(o["e"])("div",{class:"form-element",key:e},[Object(o["f"])("div",ae,Object(o["r"])(c.currentPage[e].title),1),Object(o["f"])("div",ie,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(c.currentPage[e].options,(function(t,n){return Object(o["m"])(),Object(o["e"])("div",{class:Object(o["k"])(["form-element-option",{selected:t===c.currentPage[e].optionSelected}]),key:t,onClick:function(o){return c.onDecisionClick(c.currentPage[e],t,n)}},Object(o["r"])(t),11,ce)})),128))])])})),128))]),Object(o["f"])("div",re,[Object(o["g"])(s,{onClick:c.onContinue,disabled:""},null,8,["onClick"])])])],64)}var le=n("3835"),de=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("4fad"),{props:{propQuestions:Object,title:String,saveFunction:String},data:function(){return{questions:this.propQuestions,pageIndex:0,PAGE_SIZE:2}},computed:Object(g["a"])(Object(g["a"])({},Object(b["c"])({getLabel:"data/getLabel"})),{},{dataValidated:function(){var e=this;return 0==Object.keys(this.currentPage).filter((function(t){return!e.currentPage[t].options.includes(e.currentPage[t].optionSelected)})).length},currentPage:function(){return this.paginateQuestions(this.questions,this.PAGE_SIZE)[this.pageIndex]}}),methods:Object(g["a"])(Object(g["a"])({},Object(b["b"])({nextStage:"stages/nextStage"})),{},{onContinue:function(){this.dataValidated?(this.saveData(),this.pageIndex===this.pagesLength-1?this.nextStage():this.pageIndex++):this.$refs.popup.activate()},saveData:function(){this.formatDataForSave(),this.$store.commit("data/".concat(this.saveFunction),this.currentPage)},onDecisionClick:function(e,t,n){e.optionSelected=t,e.optionSelectedIndex=n},formatDataForSave:function(){for(var e=0,t=Object.keys(this.currentPage);e<t.length;e++){var n=t[e];this.currentPage[n]=this.currentPage[n].optionSelectedIndex}},paginateQuestions:function(e,t){for(var n=[],o={},a=0,i=0,c=Object.entries(e);i<c.length;i++){var r=Object(le["a"])(c[i],2),s=r[0],l=r[1];0!==a&&a%t===0&&(n.push(o),o={}),o[s]=l,a++}return 0!==Object.keys(o).length&&n.push(o),this.pagesLength=n.length,n}})});const ue=p()(de,[["render",se]]);var ge=ue;function be(e,t,n,a,i,c){var r=Object(o["q"])("ShaderMaterial"),s=Object(o["q"])("Plane");return Object(o["m"])(),Object(o["c"])(s,{ref:"loadingScreen",width:2,height:2,position:{y:-2,z:0}},{default:Object(o["v"])((function(){return[Object(o["g"])(r,{props:{vertexShader:i.vs,fragmentShader:i.fs,uniforms:i.us}},null,8,["props"])]})),_:1},512)}n("b0c0");var fe=n("5a89"),me=n("cffa"),pe="\nvarying vec2 vUv;\nuniform float uTime;\nvarying float vTime;\nvoid main()\n{\n    gl_Position = vec4(position, 1.0);\n    vUv = uv;\n    vTime = uTime;\n}\n",he="\nuniform float uAlpha;\nvarying vec2 vUv;\nvarying float vTime;\n\nvec4 permute(vec4 x)\n{\n    return mod(((x*34.0)+1.0)*x, 289.0);\n}\n\nvec2 fade(vec2 t)\n{\n    return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\nfloat cnoise(vec2 P)\n{\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n    vec4 i = permute(permute(ix) + iy);\n    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n    vec4 gy = abs(gx) - 0.5;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n    vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n}\n\nvoid main()\n{\n    float strength = 1.0 - step(sin(vTime*0.6), sin(cnoise(vUv * 10.0) * 20.0));\n    gl_FragColor = vec4(vec3(strength), uAlpha);\n}\n",ve={data:function(){return{FADETIME:1,us:{uAlpha:{value:1},uTime:{value:0}},vs:pe,fs:he}},mounted:function(){this.loadingScreen=this.$refs.loadingScreen,this.loadingScreen.mesh.name="loadingPlane",this.loadingScreenMaterial=this.loadingScreen.material,this.loadingScreenMaterial.transparent=!0,this.clock=new fe["p"]},methods:Object(g["a"])(Object(g["a"])({},Object(b["b"])({loadingFinish:"stages/loadingFinish"})),{},{finish:function(){var e=this;me["a"].to(this.loadingScreenMaterial.uniforms.uAlpha,{duration:this.FADETIME,value:0,onComplete:function(){e.loadingFinish()}})},update:function(){var e=this.clock.getElapsedTime();this.us.uTime.value=e}})};const je=p()(ve,[["render",be]]);var Oe=je;function ye(e,t,n,a,i,c){return n.message?(Object(o["m"])(),Object(o["e"])("button",{key:0,class:Object(o["k"])(["option hided",{active:!e.sceneLoading,disabled:n.disabled}]),onClick:t[0]||(t[0]=function(){return c.onClick&&c.onClick.apply(c,arguments)})},Object(o["r"])(n.message),3)):Object(o["d"])("",!0)}n("a9e3");var Se={props:{index:Number,message:String,disabled:{type:Boolean,default:!1}},computed:Object(g["a"])({},Object(b["c"])({sceneLoading:"stages/isSceneLoading"})),methods:{onClick:function(){this.disabled||this.$store.commit("data/saveSceneDecision",this.index)}}};const xe=p()(Se,[["render",ye]]);var Le=xe;function ke(e,t,n,a,i,c){return Object(o["m"])(),Object(o["e"])("div",{class:Object(o["k"])(["popup warning",{popupActive:i.activated,popupInactive:i.deactivated}])},[Object(o["f"])("h5",null,Object(o["r"])(n.message),1)],2)}var Ae={data:function(){return{POPUP_TIME:2,activated:!1,deactivated:!1}},props:["message"],methods:{activate:function(){if(!this.activated){this.activated=!0,this.deactivated=!1;var e=this;setTimeout((function(){e.deactivate()}),1e3*this.POPUP_TIME)}},deactivate:function(){this.activated=!1,this.deactivated=!0}}};const _e=p()(Ae,[["render",ke]]);var Pe=_e,we={class:"disclaimer"},Me=Object(o["f"])("div",{class:"disclaimer-icon"},[Object(o["f"])("span",{class:"material-icons"}," error_outline ")],-1),Te={class:"disclaimer-content"};function Ce(e,t,n,a,i,c){return Object(o["m"])(),Object(o["e"])("div",we,[Me,Object(o["f"])("div",Te,Object(o["r"])(n.content),1)])}var Fe={props:["content"]};const ze=p()(Fe,[["render",Ce]]);var Ie=ze,De={class:"languages"},Ee=["src","onClick","id"];function qe(e,t,n,a,i,c){return Object(o["m"])(),Object(o["e"])("div",De,[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(i.langs,(function(t){return Object(o["m"])(),Object(o["e"])("img",{key:t,src:"./assets/images/".concat(t,".png"),class:Object(o["k"])({activeLang:e.currentLanguage===t}),onClick:function(n){return e.setLanguage(t)},id:t},null,10,Ee)})),128))])}var Re={data:function(){return{langs:["CAT","ENG"]}},computed:Object(g["a"])({},Object(b["c"])({currentLanguage:"data/getLanguage",getLabel:"data/getLabel"})),methods:Object(g["a"])({},Object(b["b"])({setLanguage:"data/setLanguage"}))};const Ne=p()(Re,[["render",qe]]);var Ge=Ne,Ye={class:"card-container"},Be={class:"card-body"},$e=Object(o["f"])("br",null,null,-1),Ue=Object(o["f"])("br",null,null,-1),He=Object(o["f"])("p",null,"Mood:",-1),Qe=Object(o["f"])("span",{id:"reportPrevMood",class:"info reportMood"},null,-1),Ze=Object(o["f"])("span",null," -> ",-1),We=Object(o["f"])("span",{id:"reportMood",class:"info reportMood"},null,-1),Ve={class:"card-action"};function Xe(e,t,n,a,i,c){var r=Object(o["q"])("Continue");return Object(o["w"])((Object(o["m"])(),Object(o["e"])("div",null,[Object(o["f"])("div",Ye,[Object(o["f"])("div",Be,[Object(o["f"])("p",null,Object(o["r"])(e.getLabel("".concat(n.sceneName,"_report"))[e.decisionTaken]),1),$e,Object(o["f"])("p",null,Object(o["r"])(e.getLabel("".concat(n.sceneName,"_report_general"))),1),Ue,He,Qe,Ze,We]),Object(o["f"])("div",Ve,[Object(o["g"])(r)])])],512)),[[o["t"],e.sceneReporting]])}n("99af");var Ke={props:["sceneName"],mounted:function(){this.red=new fe["q"]("red"),this.green=new fe["q"]("green"),this.red2=new fe["q"]("red"),this.green2=new fe["q"]("green")},watch:{sceneReporting:function(e,t){if(!0===e){var n=this.red.lerp(this.green,this.prevMood),o=this.red2.lerp(this.green2,this.mood);document.getElementById("reportPrevMood").style.background="\n                    linear-gradient(\n                        90deg, \n                        #".concat(n.getHexString()," ").concat(100*this.prevMood,"%, \n                        #FFFFFF ").concat(100*this.prevMood,"%\n                )"),document.getElementById("reportMood").style.background="\n                    linear-gradient(\n                        90deg, \n                        #".concat(o.getHexString()," ").concat(100*this.mood,"%, \n                        #FFFFFF ").concat(100*this.mood,"%\n                )")}}},computed:Object(g["a"])({},Object(b["c"])({sceneReporting:"stages/isSceneReporting",getLabel:"data/getLabel",decisionTaken:"data/getDecisionTaken",mood:"data/getMood",prevMood:"data/getPrevMood"}))};const Je=p()(Ke,[["render",Xe]]);var et=Je;function tt(e,t,n,a,i,c){var r=Object(o["q"])("LoadingScreen"),s=Object(o["q"])("LoadBlender"),l=Object(o["q"])("LoadFBX");return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["g"])(r,{ref:"loadingScreen"},null,512),Object(o["g"])(s,{ref:"blender",sceneName:n.payload.blenderSceneName},null,8,["sceneName"]),Object(o["g"])(l,{ref:"fbx",models:n.payload.fbx},null,8,["models"])],64)}var nt={props:{payload:Object},computed:Object(g["a"])({},Object(b["c"])({isSceneLoading:"stages/isSceneLoading"})),mounted:function(){this.loadingScreen=this.$refs.loadingScreen,this.blender=this.$refs.blender,this.fbx=this.$refs.fbx},methods:{update:function(){this.fbx.update(),this.isSceneLoading&&this.loadingScreen.update(),this.isSceneLoading&&this.isLoaded()&&this.loadingScreen.finish()},isLoaded:function(){return this.blender.isLoaded&&this.fbx.isLoaded}}};const ot=p()(nt,[["render",tt]]);var at=ot;function it(e,t,n,a,i,c){return Object(o["m"])(),Object(o["e"])("div")}n("159b");var ct=n("34ad"),rt=n("0ca5"),st={props:["sceneName"],mounted:function(){var e=this;if(this.isLoaded=!1,this.sceneName){var t=new fe["nc"],n=new rt["a"],o=new ct["a"];n.setDecoderPath("./assets/draco/"),o.setDRACOLoader(n);var a=t.load("./assets/scenes/".concat(this.sceneName,"/baked.jpg"));a.flipY=!1;var i=new fe["ob"]({map:a}),c=new fe["ob"]({color:16777215});o.load("./assets/scenes/".concat(this.sceneName,"/scene.glb"),(function(t){t.scene.traverse((function(e){e.material=i})),t.scene.children.filter((function(e){return e.name.includes("Light")})).forEach((function(e){return e.material=c})),e.addScene(t.scene),e.isLoaded=!0}))}else this.isLoaded=!0},methods:Object(g["a"])({},Object(b["b"])({addScene:"stages/addGLTFScene"}))};const lt=p()(st,[["render",it]]);var dt=lt;function ut(e,t,n,a,i,c){var r=Object(o["q"])("Aura"),s=Object(o["q"])("FbxModel");return Object(o["m"])(),Object(o["e"])(o["a"],null,[Object(o["g"])(r,{ref:"aura"},null,512),(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(n.models,(function(e){return Object(o["m"])(),Object(o["c"])(s,{key:e,src:"./assets/models/".concat(e.path,".fbx"),onLoad:c.onLoad,scale:e.scale||{x:.01,y:.01,z:.01},position:e.position||{x:0,y:0,z:0},rotation:e.rotation||{y:.5*-Math.PI}},null,8,["src","onLoad","scale","position","rotation"])})),128))],64)}function gt(e,t,n,a,i,c){return Object(o["m"])(),Object(o["e"])("div")}n("cfc3"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var bt="\nuniform float uTime;\nuniform float uPixelRatio;\nuniform float uSize;\n\nattribute float aScale;\n\nvoid main()\n{\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n    modelPosition.y += sin(uTime + modelPosition.x * 100.0) * aScale * 0.2;\n\n    vec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n\n    gl_Position = projectionPosition;\n    \n    gl_PointSize = uSize * aScale * uPixelRatio;\n    gl_PointSize *= (1.0 / - viewPosition.z);\n}\n",ft="\nuniform vec3 uColor;\n\nvoid main()\n{\n    float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n    float strength = 0.05 / distanceToCenter - 0.1;\n\n    gl_FragColor = vec4(uColor, strength);\n}\n",mt={data:function(){return{vs:bt,fs:ft,loaded:!1,AURA_HEIGHT:.8,AURA_SIZE:.3}},mounted:function(){this.clock=new fe["p"],this.firefliesMaterial=null,this.fireflies=null,this.red=new fe["q"]("red"),this.green=new fe["q"]("green")},methods:{init:function(e){for(var t=new fe["k"],n=60,o=new Float32Array(3*n),a=new Float32Array(n),i=0;i<n;i++)o[3*i+0]=Math.random()*this.AURA_SIZE+e.x-this.AURA_SIZE/2,o[3*i+1]=Math.random()*this.AURA_HEIGHT,o[3*i+2]=Math.random()*this.AURA_SIZE+e.z-this.AURA_SIZE/2,a[i]=Math.random()+.2;t.setAttribute("position",new fe["j"](o,3)),t.setAttribute("aScale",new fe["j"](a,1));var c=this.red.lerp(this.green,this.mood);this.firefliesMaterial=new fe["ac"]({uniforms:{uTime:{value:0},uPixelRatio:{value:1},uSize:{value:150},uColor:{value:c}},vertexShader:bt,fragmentShader:ft,transparent:!0,blending:fe["b"],depthWrite:!1}),this.fireflies=new fe["Kb"](t,this.firefliesMaterial),document.getElementById("mood").style.background="\n                linear-gradient(\n                    90deg, \n                    #".concat(c.getHexString()," ").concat(100*this.mood,"%, \n                    #FFFFFF ").concat(100*this.mood,"%\n            )"),this.load()},load:function(){this.$store.commit("stages/addToScene",this.fireflies),this.loaded=!0},update:function(){if(this.loaded){var e=this.clock.getElapsedTime();this.firefliesMaterial.uniforms.uTime.value=e}}},computed:Object(g["a"])({},Object(b["c"])({mood:"data/getMood",renderer:"stages/getRenderer"}))};const pt=p()(mt,[["render",gt]]);var ht=pt,vt={props:{models:Array},components:{Aura:ht},mounted:function(){this.modelsSize=this.models&&this.models.length?this.models.length:0,this.isLoaded=0===this.modelsSize,this.animations=[]},methods:{update:function(){this.animations.forEach((function(e){e.animation.update(e.clock.getDelta())})),this.$refs.aura.update()},onLoad:function(e){var t=new fe["e"](e);t.clipAction(e.animations[0]).play();var n=new fe["p"];0===this.animations.length&&this.$refs.aura.init(this.models[0].position),this.animations.push({animation:t,clock:n}),this.animations.length===this.modelsSize&&(this.isLoaded=!0)}}};const jt=p()(vt,[["render",ut]]);var Ot=jt,yt=(n("a4d3"),n("e01a"),{class:"scene-ui"}),St={key:0,class:"description"},xt={class:"title"},Lt={class:"footer",id:"footer"},kt={class:"info hided",id:"mood"},At={id:"emotion"};function _t(e,t,n,a,i,c){var r=this,s=Object(o["q"])("Option");return Object(o["m"])(),Object(o["e"])("div",yt,[e.sceneLoading?(Object(o["m"])(),Object(o["e"])("div",St,[Object(o["f"])("h1",null,Object(o["r"])(n.information.description),1)])):Object(o["d"])("",!0),Object(o["f"])("div",xt,[Object(o["g"])(s,{message:n.information.title,disabled:""},null,8,["message"])]),Object(o["f"])("div",Lt,[Object(o["f"])("div",{class:Object(o["k"])(["icons",{active:!e.sceneLoading}])},[Object(o["f"])("span",kt,[Object(o["f"])("b",null,Object(o["r"])(c.moodFormatted),1),Object(o["f"])("span",At,Object(o["r"])(c.currentEmotion),1)]),Object(o["f"])("button",{onClick:t[0]||(t[0]=function(e){return i.isExpanded=!i.isExpanded}),class:"material-icons icon hided"},Object(o["r"])(c.icon),1),Object(o["f"])("button",{class:"material-icons icon hided",onClick:t[1]||(t[1]=function(e){return r.$store.commit("stages/nextCamera")})},"360")],2),Object(o["f"])("div",{class:Object(o["k"])(["options",{expanded:i.isExpanded}])},[(Object(o["m"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(n.information.options,(function(e,t){return Object(o["m"])(),Object(o["c"])(s,{key:e,message:e,index:t},null,8,["message","index"])})),128))],2)])])}var Pt={props:["information"],data:function(){return{isExpanded:!0,emotions:["ðŸ˜ª","ðŸ˜Ÿ","ðŸ˜","ðŸ˜€","ðŸ˜Ž"]}},watch:{sceneReporting:function(e,t){!0===e&&document.getElementById("footer").remove()}},computed:Object(g["a"])(Object(g["a"])({},Object(b["c"])({sceneLoading:"stages/isSceneLoading",sceneReporting:"stages/isSceneReporting",currentCamera:"stages/getSceneCamera",mood:"data/getMood",getLabel:"data/getLabel"})),{},{moodFormatted:function(){return"".concat(this.getLabel("mood"),": ").concat(Math.floor(100*this.mood),"%")},currentEmotion:function(){return this.emotions[Math.floor(this.mood*this.emotions.length)]},icon:function(){return this.isExpanded?"expand_more":"expand_less"}})};const wt=p()(Pt,[["render",_t]]);var Mt=wt;function Tt(e,t,n,a,i,c){var r=Object(o["q"])("PerspectiveCamera"),s=Object(o["q"])("AmbientLight"),l=Object(o["q"])("Loader"),d=Object(o["q"])("Scene"),u=Object(o["q"])("Renderer");return Object(o["m"])(),Object(o["c"])(u,{ref:"renderer",resize:"window"},{default:Object(o["v"])((function(){return[Object(o["g"])(r,{ref:"camera",fov:70,position:i.cameraPosition,lookAt:i.cameraLookAt},null,8,["position","lookAt"]),Object(o["g"])(d,{ref:"scene",background:"#000000"},{default:Object(o["v"])((function(){return[Object(o["g"])(s,{intensity:.8},null,8,["intensity"]),Object(o["g"])(l,{ref:"loader",payload:{blenderSceneName:n.config.sceneName,fbx:n.config.fbx}},null,8,["payload"])]})),_:1},512)]})),_:1},512)}var Ct={props:{config:Object},data:function(){var e=this.config.cameraLookAts,t=this.config.cameraPositions;return{cameras:t.length,cameraPositions:t,cameraPosition:Object.assign({},t[0]),cameraLookAts:e,cameraLookAt:Object.assign({},e[0]),ANIM_TIME:1}},mounted:function(){var e=this;this.scene=this.$refs.scene,this.renderer=this.$refs.renderer,this.$store.commit("stages/setScene",this.scene),this.$store.commit("stages/setRenderer",this.renderer),this.renderer.onBeforeRender((function(){e.$refs.loader.update(),e.update()}))},watch:{camera:function(e,t){e%=this.cameras,this.swap(this.cameraPosition,this.cameraPositions[e]),this.swap(this.cameraLookAt,this.cameraLookAts[e])}},computed:Object(g["a"])({},Object(b["c"])({camera:"stages/getSceneCamera",gltf:"stages/getGLTF"})),methods:{update:function(){this.gltf&&this.config.update(this.gltf)},swap:function(e,t){me["a"].to(e,{duration:this.ANIM_TIME,x:t.x,y:t.y,z:t.z})}}};const Ft=p()(Ct,[["render",Tt]]);var zt=Ft,It=(n("7db0"),n("e9c4"),{continue:["Continue","AvanÃ§a"],popup:["Fill answers please","Emplena les preguntes siusplau"],welcome_title:["TFG","TFG"],welcome_body:["Game for raising awarness on social media addiction ","Joc per conscienciar sobre l'addicciÃ³ a les xarxes socials"],welcome_disclaimers:[["Anonymous use of Age Gender Answers for statistical analysis","By starting the game, you are consenting the use of the data"],["Anonymous use of Age Gender Answers for statistical analysis","By starting the game, you are consenting the use of the data"]],final_title:["Game end","Fi del joc"],final_body:["Thanks","Gracies"],final_restart:["Restart","Reinicia"],about_title:["About you","Sobre tu"],about_age:["Select your age","Selecciona la teva edat"],about_gender:["Select your gender","Selecciona el teu genere"],about_gender_options:[["Male","Female","Other"],["Home","Dona","Altre"]],survey_title:["Final survey","Enquesta final"],s1_title:["ENGAn excessive use of social media platforms can lead to negative effects in physical and mental health","CATAn excessive use of social media platforms can lead to negative effects in physical and mental health"],s2_title:["ENGAn excessive use of social media platforms can lead to negative effects in physical and mental health","CATAn excessive use of social media platforms can lead to negative effects in physical and mental health"],survey_options:[["Disagree","Neutral","Agree"],["En desacord","Neutral","D'acord"]],mood:["Mood","Anims"],Scene1_desc:["Day 1 Scene 1","Dia 1 Situacio 1"],Scene1_title:["Its early in the morning, you are in the dinning room before going to school, in the table there are your parents, they start to talk about some family trip ideas","Its early in the morning, you are in the dinning room before going to school, in the table there are your parents, they start to talk about some family trip ideas"],Scene1_options:[["You disconnect from the conversation and scroll through your phone","You participate in the conversation proposing some ideas","You go to the table to listem them"],["You disconnect from the conversation and scroll through your phone","You participate in the conversation proposing some ideas","You go to the table to listem them"]],Scene1_report:[["Your parents feel like you are not interested and stop talking about that after some time","You propose a good idea and the family decides to do that next weekend","Your parents decide the trip that will be done next weekend, you are all happy about it"],["Your parents feel like you are not interested and stop talking about that after some time","You propose a good idea and the family decides to do that next weekend","Your parents decide the trip that will be done next weekend, you are all happy about it"]],Scene1_report_general:["It's always good to spend time with your family as it will create a better connection with them","It's always good to spend time with your family as it will create a better connection with them"],Scene2_desc:["Day 2 Scene 1","Dia 2 Situacio 1"],Scene2_title:["Its early in the morning, you are eating your breakfast before going to school, in the table there are your parents, they start to talk about some family trip ideas","Its early in the morning, you are eating your breakfast before going to school, in the table there are your parents, they start to talk about some family trip ideas"],Scene2_options:[["You disconnect from the conversation and scroll through your phone","You disconnect from the conversation and scroll through your phone","You disconnect from the conversation and scroll through your phone"],["You just focus in finnishing your meal","You just focus in finnishing your meal","You just focus in finnishing your meal"]],Scene2_report:[["Bad","Mid.","Good"],["CATBad","CATMid.CATMid.CATMid.CATMid. CATMid.CATMid. CATMid.","cATGood"]],Scene3_desc:["Day 3 Scene 1","Dia 3 Situacio 1"],Scene3_title:["Its early in the morning, you are eating your breakfast before going to school, in the table there are your parents, they start to talk about some family trip ideas","Its early in the morning, you are eating your breakfast before going to school, in the table there are your parents, they start to talk about some family trip ideas"],Scene3_options:[["You disconnect from the conversation and scroll through your phone","You disconnect from the conversation and scroll through your phone","You disconnect from the conversation and scroll through your phone"],["You just focus in finnishing your meal","You just focus in finnishing your meal","You just focus in finnishing your meal"]],Scene3_report:[["Bad","Mid.","Good"],["CATBad","CATMid.CATMid.CATMid.CATMid. CATMid.CATMid. CATMid.","cATGood"]]}),Dt=function(){return{languages:{ENG:0,CAT:1},language:0,userData:{sceneDecisions:[],aboutDecisions:{},surveyDecisions:{}},prevMood:.5,mood:.5,decisionsMood:[[-.5,.3,.1],[-.5,.1,.3],[-.2,-.3,.4]],decisionTaken:null,scenesCollection:"61b4956f0ddbee6f8b1b8c7e",usersCollection:"61b49c4262ed886f915e5a13",masterKey:"$2b$10$yGbK6Zw/E5lzTl.TmQivFuhYR87PWV2Cy2TG.gIi8Lp2BLduGVNyq"}},Et={getLabel:function(e){return function(t){return It[t]?It[t][e.language]:"No label"}},getLanguage:function(e){return Object.keys(e.languages).find((function(t){return e.languages[t]===e.language}))},getMood:function(e){return e.mood},getPrevMood:function(e){return e.prevMood},getDecisionTaken:function(e){return e.decisionTaken},getUserData:function(e){return e.userData}},qt={setLanguage:function(e,t){var n=e.commit;n("setLanguage",t)},saveData:function(e){e.commit;var t=e.getters;console.log(t.getUserData)}},Rt={setLanguage:function(e,t){e.language=e.languages[t]},saveData:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&console.log(t.responseText)},t.open("POST","https://api.jsonbin.io/v3/b",!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Master-Key",e.masterKey),t.setRequestHeader("X-Collection-Id",e.usersCollection),t.send(JSON.stringify(e.userData))},saveAboutDecisions:function(e,t){for(var n=0,o=Object.entries(t);n<o.length;n++){var a=Object(le["a"])(o[n],2),i=a[0],c=a[1];e.userData.aboutDecisions[i]=c}},saveSurveyDecisions:function(e,t){for(var n=0,o=Object.entries(t);n<o.length;n++){var a=Object(le["a"])(o[n],2),i=a[0],c=a[1];e.userData.surveyDecisions[i]=c}},saveSceneDecision:function(e,t){var n=e.userData.sceneDecisions.length;e.userData.sceneDecisions.push(t),e.prevMood=e.mood,e.mood+=e.decisionsMood[n][t],e.mood>1&&(e.mood=1),e.mood<0&&(e.mood=0),e.decisionTaken=t,this.commit("stages/reportStart",{root:!0})}},Nt={namespaced:!0,state:Dt,getters:Et,actions:qt,mutations:Rt},Gt=function(){return{stages:["Welcome","About","Scene1","Scene2","Scene3","Survey","Final"],currentStageIndex:0,sceneLoading:!1,sceneReporting:!1,scene:null,renderer:null,gltfScene:null,sceneCamera:0}},Yt={isCurrentStage:function(e){return function(t){return e.stages[e.currentStageIndex]==t}},currentStageIsScene:function(e){return e.stages[e.currentStageIndex].includes("Scene")},isSceneLoading:function(e){return e.sceneLoading},isSceneReporting:function(e){return e.sceneReporting},getSceneCamera:function(e){return e.sceneCamera},getGLTF:function(e){return e.gltfScene},getRenderer:function(e){return e.renderer},isLastStage:function(e){return e.currentStageIndex==e.stages.length-1}},Bt={onAppLoad:function(e){var t=e.commit,n=e.getters;n.currentStageIsScene&&t("loadingStart")},nextStage:function(e){var t=e.commit,n=e.getters;n.isLastStage||t("nextStage"),n.currentStageIsScene&&t("loadingStart"),n.isLastStage&&t("saveData")},addGLTFScene:function(e,t){var n=e.commit;n("addToScene",t),n("setGLTFScene",t)},loadingFinish:function(e){var t=e.commit;t("removeLoading"),t("loadingEnd")}},$t={nextStage:function(e){e.currentStageIndex++},setScene:function(e,t){e.scene=t},setRenderer:function(e,t){e.renderer=t},setGLTFScene:function(e,t){e.gltfScene=t},removeLoading:function(e){e.scene.remove(e.scene.scene.getObjectByName("loadingPlane"))},addToScene:function(e,t){e.scene.add(t)},loadingStart:function(e){e.sceneLoading=!0,e.sceneReporting=!1},loadingEnd:function(e){e.sceneLoading=!1},reportStart:function(e){e.sceneReporting=!0},reportEnd:function(e){e.sceneReporting=!1},saveData:function(){this.dispatch("data/saveData",{root:!0})},nextCamera:function(e){e.sceneCamera++}},Ut={namespaced:!0,state:Gt,getters:Yt,actions:Bt,mutations:$t},Ht=Object(b["a"])({modules:{data:Nt,stages:Ut}}),Qt=n("af1e");Object(o["b"])(V).use(Ht).use(Qt["a"]).component("Continue",ee).component("Form",ge).component("LoadingScreen",Oe).component("Report",et).component("Option",Le).component("Disclaimer",Ie).component("SceneUi",Mt).component("Popup",Pe).component("SelectFlag",Ge).component("Loader",at).component("LoadBlender",dt).component("LoadFBX",Ot).component("SceneVisuals",zt).mount("#app")}});
//# sourceMappingURL=app.a5c83442.js.map